<!--
  ~ Copyright (c) 2014 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>
  <h2>
    <ol class="mica-breadcrumb">
      <li><a href="/#/study-dataset" translate>study-datasets</a></li>
      <li class="active">{{dataset.id}}</li>
    </ol>
  </h2>

  <div class="clearfix">
    <div class="pull-left">
      <small class="help-block inline">{{'global.lastUpdate' | translate}}: {{dataset.timestamps.lastUpdate ===
        undefined ? dataset.timestamps.created : dataset.timestamps.lastUpdate |
        amDateFormat : 'lll'}}
      </small>
      <i class="fa fa-star-o" ng-show="!dataset.published"
        title="{{'publish.not-published' | translate}}"></i>
      <i class="fa fa-star" ng-show="dataset.published"
        title="{{'publish.published' | translate}}"></i>
    </div>
    <div class="btn-group pull-right">
      <a ng-href="#/study-dataset/{{dataset.id}}/edit" class="btn btn-primary"
        ng-if="hasRole(['mica-administrator','mica-reviewer','mica-editor'])">
        <i class="fa fa-pencil-square-o"></i> <span translate>edit</span>
      </a>
      <publish-switch status="isPublished()" publish="publish()"
        ng-if="hasRole(['mica-administrator','mica-reviewer'])"></publish-switch>
    </div>
  </div>

  <tabset>
    <tab ng-repeat="tab in tabs" heading="{{'language.' + tab.lang | translate}}" active="tab.active"
      disabled="tab.disabled">


        <div class="row">
          <div class="col-md-6">
            <h3 translate>dataset.general-info</h3>

            <table class="table table-bordered table-striped">
              <tbody>
              <tr>
                <th translate>dataset.name</th>
                <td>
                  <localized value="dataset.name" lang="tab.lang"></localized>
                </td>
              </tr>
              <tr>
                <th translate>dataset.acronym</th>
                <td>
                  <localized value="dataset.acronym" lang="tab.lang"></localized>
                </td>
              </tr>
              <tr>
                <th translate>dataset.description</th>
                <td>
                  <localized value="dataset.description" lang="tab.lang"></localized>
                </td>
              </tr>
              <tr>
                <th translate>dataset.entity-type</th>
                <td>{{dataset.entityType}}</td>
              </tr>
              </tbody>
            </table>

            <label ng-show="dataset.attributes.length>0" translate>attributes</label>
            <attributes-list attributes="dataset.attributes"></attributes-list>

          </div>
          <div class="col-md-6">
            <h3 translate ng-show="dataset['obiba.mica.StudyDatasetDto.type']">dataset.study-table.title</h3>

            <table class="table table-bordered table-striped" ng-show="dataset['obiba.mica.StudyDatasetDto.type']">
              <tbody>
              <tr>
                <th translate>study.label</th>
                <td>
                  <a ng-href="#/study/{{dataset['obiba.mica.StudyDatasetDto.type'].studyTable.studyId}}">
                    {{dataset['obiba.mica.StudyDatasetDto.type'].studyTable.studyId}}
                  </a>
                </td>
              </tr>
              <tr>
                <th translate>study.population</th>
                <td>
                    {{dataset['obiba.mica.StudyDatasetDto.type'].studyTable.populationId}}
                </td>
              </tr>
              <tr>
                <th translate>study.data-collection-event</th>
                <td>
                  {{dataset['obiba.mica.StudyDatasetDto.type'].studyTable.dataCollectionEventId}}
                </td>
              </tr>
              <tr>
                <th translate>dataset.project</th>
                <td>
                  {{dataset['obiba.mica.StudyDatasetDto.type'].studyTable.project}}
                </td>
              </tr>
              <tr>
                <th translate>dataset.table</th>
                <td>
                  {{dataset['obiba.mica.StudyDatasetDto.type'].studyTable.table}}
                </td>
              </tr>
              <tr>
                <th translate>dataset.table-name</th>
                <td>
                  <localized value="dataset['obiba.mica.StudyDatasetDto.type'].studyTable.name" lang="tab.lang"></localized>
                </td>
              </tr>
              <tr>
                <th translate>dataset.table-description</th>
                <td>
                  <localized value="dataset['obiba.mica.StudyDatasetDto.type'].studyTable.description"
                    lang="tab.lang"></localized>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>








    </tab>
  </tabset>


</div>
