<!--
  ~ Copyright (c) 2017 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>

  <h2>
    <ol class="breadcrumb mica-breadcrumb">
      <li><a href="/#/admin" translate>global.menu.admin</a></li>
      <li class="active" translate>general</li>
    </ol>
  </h2>

  <form name="form" role="form" novalidate ng-submit="save()">

    <div class="row">
      <div class="col-md-6">
        <h3 ng-class="{'no-margin-top': screen.is('lg')}" translate>config.serverIdentification</h3>

        <div form-input name="name" model="micaConfig.name" label="config.name" required="true"
            help="config.name-help"></div>

        <div form-input name="publicUrl" model="micaConfig.publicUrl" label="config.publicUrl"
            help="config.publicUrl-help"></div>

        <div form-input name="portalUrl" model="micaConfig.portalUrl" label="config.portalUrl"
             help="config.portalUrl-help"></div>
      </div>

      <div class="col-md-6">
        <h3 ng-class="{'no-margin-top': screen.is('lg')}" translate>config.dataSource</h3>

        <div form-input name="opal" model="micaConfig.opal" label="config.opal" help="config.opal-help"
            required="true"></div>

        <div form-input name="threshold" model="micaConfig.privacyThreshold" label="config.privacy-threshold"
            type="number" required="false" help="config.privacy-threshold-help"></div>
      </div>
    </div>

    <h3 translate>config.content</h3>

    <div class="row">
      <div class="col-md-6">

        <h4 translate>config.content-edition</h4>

        <div class="form-group"
            ng-class="{'has-error': (form.languages.$dirty || form.saveAttempted) && form.languages.$invalid}">
          <label for="languages" class="control-label">
            <span translate>config.languages</span> *
          </label>
          <select chosen multiple="multiple" id="languages" name="languages" ng-model="micaConfig.languages"
              ng-options="code as name for (code, name) in availableLanguages" class="chosen-select" required>
          </select>
          <p class="input-error" ng-show="form.languages.$dirty && form.languages.$invalid">
            <span ng-show="form.languages.$error.server">{{ errors.name }}</span>
            <span ng-show="form.languages.$error.required" translate>required</span>
          </p>
          <p class="help-block" translate>config.languages-help</p>
        </div>

        <div form-input name="defaultCharSet" model="micaConfig.defaultCharSet" label="config.defaultCharSet"
            required="true"></div>

        <h4 translate>config.content-access</h4>
        <div form-checkbox min="0" name="openAccess" model="micaConfig.openAccess" label="config.openAccess"
            help="config.openAccess-help"></div>

      </div>
      <div class="col-md-6">
        <h4 translate>config.sections</h4>
            <div form-checkbox name="isSingleStudyEnabled" model="micaConfig.isSingleStudyEnabled"
                label="config.single-study-enabled" help="config.single-study-enabled-help"></div>
            <div form-checkbox name="isNetworkEnabled" model="micaConfig.isNetworkEnabled" label="config.network-enabled"
                help="config.network-enabled-help"></div>
            <div form-checkbox name="isSingleNetworkEnabled" model="micaConfig.isSingleNetworkEnabled"
                label="config.single-network-enabled" help="config.single-network-enabled-help"
                disabled="!micaConfig.isNetworkEnabled"></div>

            <div form-checkbox name="isCollectedDatasetEnabled" model="micaConfig.isCollectedDatasetEnabled"
                label="config.collected-dataset-enabled" help="config.collected-dataset-enabled-help"></div>
            <div form-checkbox name="isHarmonizationDatasetEnabled" model="micaConfig.isHarmonizationDatasetEnabled"
                label="config.harmonization-dataset-enabled" help="config.harmonization-dataset-enabled-help"></div>

      </div>
    </div>



    <div class="voffset2">
      <a href="#/admin/general" class="btn btn-default">
        <span translate>cancel</span>
      </a>

      <button type="submit" class="btn btn-primary">
        <span translate>save</span>
      </button>
    </div>
  </form>

</div>
