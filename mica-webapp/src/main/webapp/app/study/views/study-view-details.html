<div>

  <div class="voffset4">
    <img class="img-responsive desaturate" ng-show="study.logo" ng-src="{{logoUrl}}">

    <h2>
      <localized value="study.name" lang="tab.lang"></localized>
    </h2>

    <localized value="study.objectives" lang="tab.lang"></localized>
  </div>

  <div sf-model="study.model" sf-form="sfForm.definition" sf-schema="sfForm.schema" sf-options="sfOptions"></div>

  <div id="study-authorization">
    <h3 translate ng-show="study.model.specificAuthorization || study.model.maelstromAuthorization">
      study.authorization.label</h3>
    <table class="table table-bordered table-striped" ng-show="study.model.specificAuthorization || study.model.maelstromAuthorization">
      <tbody>
      <tr ng-show="study.model.maelstromAuthorization">
        <td translate>study.authorization.maelstrom</td>
        <td>
          {{'study.authorization.authorized.' + study.model.maelstromAuthorization.authorized | translate}}
          <span ng-show="study.model.maelstromAuthorization.authorized && study.model.maelstromAuthorization.authorizer">
                  <span translate>by</span> {{study.model.maelstromAuthorization.authorizer}}
                </span>
          <span ng-show="study.model.maelstromAuthorization.authorized && study.model.maelstromAuthorization.date">
                  <span translate>on</span> {{study.model.maelstromAuthorization.date}}
                </span>
        </td>
      </tr>
      <tr ng-show="study.model.specificAuthorization">
        <td translate>study.authorization.specific</td>
        <td>
          {{'study.authorization.authorized.' + study.model.specificAuthorization.authorized | translate}}
          <span ng-show="study.model.specificAuthorization.authorized && study.model.specificAuthorization.authorizer">
                  <span translate>by</span> {{study.model.specificAuthorization.authorizer}}
                </span>
          <span ng-show="study.model.specificAuthorization.authorized && study.model.specificAuthorization.date">
                  <span translate>on</span> {{study.model.specificAuthorization.date}}
                </span>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

    <div class="row">
      <div class="col-md-6">
        <h3 translate>study.general-info</h3>

        <div class="table-responsive">
          <table class="table table-bordered table-striped">
          <tbody>
          <tr ng-repeat="role in roles">
            <th>{{'study.member-list' | translate: {type: role} }}</th>
            <td>
              <div ng-controller="ContactController">
                <ul ui-sortable="sortableOptions" ng-model="memberships[role]" class="list-unstyled sortable" ng-show="memberships[role].length">
                  <li ng-repeat="person in memberships[role]">
                    <a ng-click="viewContact(person)" title="{{'dnd-reorder' | translate}}">
                      {{person.title}} {{person.firstName}} {{person.lastName}}
                      {{person.academicLevel}}
                    <span ng-show="person.institution.name.length">
                      (<localized value="person.institution.name" lang="tab.lang"></localized>)
                    </span>
                    </a>
                    <div class="inline" ng-if="inViewMode() && permissions.canEdit()">
                      <a ng-click="editMember(study, person, role)" class="action"><i class="fa fa-pencil"></i></a>
                      <a ng-click="deleteMember(study, person, role)" class="action"><i class="fa fa-trash-o"></i></a>
                    </div>
                  </li>
                </ul>
                <button type="button" class="btn btn-info btn-sm" ng-click="addMember(study, role)" ng-if="inViewMode() && permissions.canEdit()">
                  <i class="fa fa-plus"></i> <span>{{ 'study.add-member' | translate: {type: role} }}</span>
                </button>
              </div>
            </td>
          </tr>
          <tr ng-show="study.networks.length">
            <th translate>networks</th>
            <td>{{study.networks}}</td>
          </tr>
          </tbody>
        </table>
        </div>
      </div>
    </div>

    <div id="study-timeline">
      <h3 translate ng-show="study.populations.length">study.timeline</h3>
      <div id="timeline"></div>
    </div>

    <div id="study-populations">
      <h3>
        <span translate>study.populations</span>
      </h3>
      <a ng-click="addPopulation()" class="btn btn-info" ng-if="inViewMode() && permissions.canEdit()">
        <i class="fa fa-plus"></i> <span translate>study.add-population</span>
      </a>

      <uib-accordion close-others="true">
        <div uib-accordion-group class="panel-default" ng-repeat="population in study.populations">
          <div ng-include="'app/study/views/population/population-view.html'"></div>
        </div>
      </uib-accordion>
    </div>
</div>
